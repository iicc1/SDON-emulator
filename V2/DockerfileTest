# Oficial Python 3.9 image based on ubuntu server
FROM python:3.9

# Base working directory
WORKDIR /root

# Set the yang urls as env variables that will be used later
ARG YANG_URLS
ENV YANG_URLS ${YANG_URLS}

# Copy folders and files from the current folder
COPY . /root

# Install required linux dependencies
RUN apt-get update -y && apt-get install -y xsltproc libxml2-utils
# Install required python dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Download yang files input as an arg 
RUN bash load-yangs.sh
# Generate bindings for these yang files
RUN bash generate-bindings.sh

# Allows to have the container running without any main process
CMD tail -f /dev/null
